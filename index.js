(()=>{var Pe=Object.create,K=Object.defineProperty,je=Object.getPrototypeOf,He=Object.prototype.hasOwnProperty,De=Object.getOwnPropertyNames,Ue=Object.getOwnPropertyDescriptor;var Ke=t=>K(t,"__esModule",{value:!0});var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ze=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of De(e))!He.call(t,n)&&n!=="default"&&K(t,n,{get:()=>e[n],enumerable:!(r=Ue(e,n))||r.enumerable});return t},Ge=t=>ze(Ke(K(t!=null?Pe(je(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ie=B((kt,se)=>{(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(r,n){return r<<n|r>>>32-n},rotr:function(r,n){return r<<32-n|r>>>n},endian:function(r){if(r.constructor==Number)return e.rotl(r,8)&16711935|e.rotl(r,24)&4278255360;for(var n=0;n<r.length;n++)r[n]=e.endian(r[n]);return r},randomBytes:function(r){for(var n=[];r>0;r--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(r){for(var n=[],c=0,l=0;c<r.length;c++,l+=8)n[l>>>5]|=r[c]<<24-l%32;return n},wordsToBytes:function(r){for(var n=[],c=0;c<r.length*32;c+=8)n.push(r[c>>>5]>>>24-c%32&255);return n},bytesToHex:function(r){for(var n=[],c=0;c<r.length;c++)n.push((r[c]>>>4).toString(16)),n.push((r[c]&15).toString(16));return n.join("")},hexToBytes:function(r){for(var n=[],c=0;c<r.length;c+=2)n.push(parseInt(r.substr(c,2),16));return n},bytesToBase64:function(r){for(var n=[],c=0;c<r.length;c+=3)for(var l=r[c]<<16|r[c+1]<<8|r[c+2],u=0;u<4;u++)c*8+u*6<=r.length*8?n.push(t.charAt(l>>>6*(3-u)&63)):n.push("=");return n.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],c=0,l=0;c<r.length;l=++c%4)l!=0&&n.push((t.indexOf(r.charAt(c-1))&Math.pow(2,-2*l+8)-1)<<l*2|t.indexOf(r.charAt(c))>>>6-l*2);return n}};se.exports=e})()});var G=B((Rt,ce)=>{var z={utf8:{stringToBytes:function(t){return z.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(z.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r)&255);return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};ce.exports=z});var he=B((Ct,oe)=>{oe.exports=function(t){return t!=null&&(ae(t)||Ve(t)||!!t._isBuffer)};function ae(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ve(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&ae(t.slice(0,0))}});var ue=B((Ft,le)=>{(function(){var t=ie(),e=G().utf8,r=he(),n=G().bin,c=function(l,u){l.constructor==String?u&&u.encoding==="binary"?l=n.stringToBytes(l):l=e.stringToBytes(l):r(l)?l=Array.prototype.slice.call(l,0):!Array.isArray(l)&&l.constructor!==Uint8Array&&(l=l.toString());for(var s=t.bytesToWords(l),f=l.length*8,o=1732584193,i=-271733879,a=-1732584194,h=271733878,d=0;d<s.length;d++)s[d]=(s[d]<<8|s[d]>>>24)&16711935|(s[d]<<24|s[d]>>>8)&4278255360;s[f>>>5]|=128<<f%32,s[(f+64>>>9<<4)+14]=f;for(var g=c._ff,m=c._gg,M=c._hh,y=c._ii,d=0;d<s.length;d+=16){var L=o,E=i,F=a,H=h;o=g(o,i,a,h,s[d+0],7,-680876936),h=g(h,o,i,a,s[d+1],12,-389564586),a=g(a,h,o,i,s[d+2],17,606105819),i=g(i,a,h,o,s[d+3],22,-1044525330),o=g(o,i,a,h,s[d+4],7,-176418897),h=g(h,o,i,a,s[d+5],12,1200080426),a=g(a,h,o,i,s[d+6],17,-1473231341),i=g(i,a,h,o,s[d+7],22,-45705983),o=g(o,i,a,h,s[d+8],7,1770035416),h=g(h,o,i,a,s[d+9],12,-1958414417),a=g(a,h,o,i,s[d+10],17,-42063),i=g(i,a,h,o,s[d+11],22,-1990404162),o=g(o,i,a,h,s[d+12],7,1804603682),h=g(h,o,i,a,s[d+13],12,-40341101),a=g(a,h,o,i,s[d+14],17,-1502002290),i=g(i,a,h,o,s[d+15],22,1236535329),o=m(o,i,a,h,s[d+1],5,-165796510),h=m(h,o,i,a,s[d+6],9,-1069501632),a=m(a,h,o,i,s[d+11],14,643717713),i=m(i,a,h,o,s[d+0],20,-373897302),o=m(o,i,a,h,s[d+5],5,-701558691),h=m(h,o,i,a,s[d+10],9,38016083),a=m(a,h,o,i,s[d+15],14,-660478335),i=m(i,a,h,o,s[d+4],20,-405537848),o=m(o,i,a,h,s[d+9],5,568446438),h=m(h,o,i,a,s[d+14],9,-1019803690),a=m(a,h,o,i,s[d+3],14,-187363961),i=m(i,a,h,o,s[d+8],20,1163531501),o=m(o,i,a,h,s[d+13],5,-1444681467),h=m(h,o,i,a,s[d+2],9,-51403784),a=m(a,h,o,i,s[d+7],14,1735328473),i=m(i,a,h,o,s[d+12],20,-1926607734),o=M(o,i,a,h,s[d+5],4,-378558),h=M(h,o,i,a,s[d+8],11,-2022574463),a=M(a,h,o,i,s[d+11],16,1839030562),i=M(i,a,h,o,s[d+14],23,-35309556),o=M(o,i,a,h,s[d+1],4,-1530992060),h=M(h,o,i,a,s[d+4],11,1272893353),a=M(a,h,o,i,s[d+7],16,-155497632),i=M(i,a,h,o,s[d+10],23,-1094730640),o=M(o,i,a,h,s[d+13],4,681279174),h=M(h,o,i,a,s[d+0],11,-358537222),a=M(a,h,o,i,s[d+3],16,-722521979),i=M(i,a,h,o,s[d+6],23,76029189),o=M(o,i,a,h,s[d+9],4,-640364487),h=M(h,o,i,a,s[d+12],11,-421815835),a=M(a,h,o,i,s[d+15],16,530742520),i=M(i,a,h,o,s[d+2],23,-995338651),o=y(o,i,a,h,s[d+0],6,-198630844),h=y(h,o,i,a,s[d+7],10,1126891415),a=y(a,h,o,i,s[d+14],15,-1416354905),i=y(i,a,h,o,s[d+5],21,-57434055),o=y(o,i,a,h,s[d+12],6,1700485571),h=y(h,o,i,a,s[d+3],10,-1894986606),a=y(a,h,o,i,s[d+10],15,-1051523),i=y(i,a,h,o,s[d+1],21,-2054922799),o=y(o,i,a,h,s[d+8],6,1873313359),h=y(h,o,i,a,s[d+15],10,-30611744),a=y(a,h,o,i,s[d+6],15,-1560198380),i=y(i,a,h,o,s[d+13],21,1309151649),o=y(o,i,a,h,s[d+4],6,-145523070),h=y(h,o,i,a,s[d+11],10,-1120210379),a=y(a,h,o,i,s[d+2],15,718787259),i=y(i,a,h,o,s[d+9],21,-343485551),o=o+L>>>0,i=i+E>>>0,a=a+F>>>0,h=h+H>>>0}return t.endian([o,i,a,h])};c._ff=function(l,u,s,f,o,i,a){var h=l+(u&s|~u&f)+(o>>>0)+a;return(h<<i|h>>>32-i)+u},c._gg=function(l,u,s,f,o,i,a){var h=l+(u&f|s&~f)+(o>>>0)+a;return(h<<i|h>>>32-i)+u},c._hh=function(l,u,s,f,o,i,a){var h=l+(u^s^f)+(o>>>0)+a;return(h<<i|h>>>32-i)+u},c._ii=function(l,u,s,f,o,i,a){var h=l+(s^(u|~f))+(o>>>0)+a;return(h<<i|h>>>32-i)+u},c._blocksize=16,c._digestsize=16,le.exports=function(l,u){if(l==null)throw new Error("Illegal argument "+l);var s=t.wordsToBytes(c(l,u));return u&&u.asBytes?s:u&&u.asString?n.bytesToString(s):t.bytesToHex(s)}})()});var de=Ge(ue()),fe={init(){document.addEventListener("submit",async t=>{if(t.target?.dataset?.dynamicForm===void 0)return;t.preventDefault();let e=t.target,r=new FormData(e),n=e.action,c=e.method;if((await fetch(n,{method:c,body:r,headers:{Accept:"application/json"}})).ok){if(e.dataset.pre){let s=document.querySelector(e.dataset.pre).innerHTML;for(let f of r){let o=f[0],i=f[1];s=s.replaceAll(`[[${o}]]`,i),o==="email"&&(s=s.replaceAll("[[emailhash]]",(0,de.default)(i)))}e.insertAdjacentHTML("beforebegin",s)}e.insertAdjacentHTML("afterend",document.querySelector(e.dataset.success).innerHTML)}else e.insertAdjacentHTML("afterend",document.querySelector(e.dataset.error).innerHTML);let u=e.nextElementSibling;e.remove()})}};function A(t){return Array.isArray?Array.isArray(t):pe(t)==="[object Array]"}var We=1/0;function Ye(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-We?"-0":e}function Qe(t){return t==null?"":Ye(t)}function I(t){return typeof t=="string"}function ge(t){return typeof t=="number"}function Je(t){return t===!0||t===!1||qe(t)&&pe(t)=="[object Boolean]"}function me(t){return typeof t=="object"}function qe(t){return me(t)&&t!==null}function w(t){return t!=null}function V(t){return!t.trim().length}function pe(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var Xe="Incorrect 'index' type",Ze=t=>`Invalid value for key ${t}`,et=t=>`Pattern length exceeds max of ${t}.`,tt=t=>`Missing ${t} property in key`,rt=t=>`Property 'weight' in key '${t}' must be a positive integer`,ye=Object.prototype.hasOwnProperty,Me=class{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let c=we(n);r+=c.weight,this._keys.push(c),this._keyMap[c.id]=c,r+=c.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function we(t){let e=null,r=null,n=null,c=1;if(I(t)||A(t))n=t,e=Se(t),r=W(t);else{if(!ye.call(t,"name"))throw new Error(tt("name"));let l=t.name;if(n=l,ye.call(t,"weight")&&(c=t.weight,c<=0))throw new Error(rt(l));e=Se(l),r=W(l)}return{path:e,id:r,weight:c,src:n}}function Se(t){return A(t)?t:t.split(".")}function W(t){return A(t)?t.join("."):t}function nt(t,e){let r=[],n=!1,c=(l,u,s)=>{if(!!w(l))if(!u[s])r.push(l);else{let f=u[s],o=l[f];if(!w(o))return;if(s===u.length-1&&(I(o)||ge(o)||Je(o)))r.push(Qe(o));else if(A(o)){n=!0;for(let i=0,a=o.length;i<a;i+=1)c(o[i],u,s+1)}else u.length&&c(o,u,s+1)}};return c(t,I(e)?e.split("."):e,0),n?r:r[0]}var st={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},it={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},ct={location:0,threshold:.6,distance:100},ot={useExtendedSearch:!1,getFn:nt,ignoreLocation:!1,ignoreFieldNorm:!1},p={...it,...st,...ct,...ot},at=/[^ ]+/g;function ht(t=3){let e=new Map,r=Math.pow(10,t);return{get(n){let c=n.match(at).length;if(e.has(c))return e.get(c);let l=1/Math.sqrt(c),u=parseFloat(Math.round(l*r)/r);return e.set(c,u),u},clear(){e.clear()}}}var P=class{constructor({getFn:e=p.getFn}={}){this.norm=ht(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,I(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){let r=this.size();I(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!w(e)||V(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((c,l)=>{let u=this.getFn(e,c.path);if(!!w(u)){if(A(u)){let s=[],f=[{nestedArrIndex:-1,value:u}];for(;f.length;){let{nestedArrIndex:o,value:i}=f.pop();if(!!w(i))if(I(i)&&!V(i)){let a={v:i,i:o,n:this.norm.get(i)};s.push(a)}else A(i)&&i.forEach((a,h)=>{f.push({nestedArrIndex:h,value:a})})}n.$[l]=s}else if(!V(u)){let s={v:u,n:this.norm.get(u)};n.$[l]=s}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function _e(t,e,{getFn:r=p.getFn}={}){let n=new P({getFn:r});return n.setKeys(t.map(we)),n.setSources(e),n.create(),n}function lt(t,{getFn:e=p.getFn}={}){let{keys:r,records:n}=t,c=new P({getFn:e});return c.setKeys(r),c.setIndexRecords(n),c}function j(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:c=p.distance,ignoreLocation:l=p.ignoreLocation}={}){let u=e/t.length;if(l)return u;let s=Math.abs(n-r);return c?u+s/c:s?1:u}function ut(t=[],e=p.minMatchCharLength){let r=[],n=-1,c=-1,l=0;for(let u=t.length;l<u;l+=1){let s=t[l];s&&n===-1?n=l:!s&&n!==-1&&(c=l-1,c-n+1>=e&&r.push([n,c]),n=-1)}return t[l-1]&&l-n>=e&&r.push([n,l-1]),r}var R=32;function dt(t,e,r,{location:n=p.location,distance:c=p.distance,threshold:l=p.threshold,findAllMatches:u=p.findAllMatches,minMatchCharLength:s=p.minMatchCharLength,includeMatches:f=p.includeMatches,ignoreLocation:o=p.ignoreLocation}={}){if(e.length>R)throw new Error(et(R));let i=e.length,a=t.length,h=Math.max(0,Math.min(n,a)),d=l,g=h,m=s>1||f,M=m?Array(a):[],y;for(;(y=t.indexOf(e,g))>-1;){let S=j(e,{currentLocation:y,expectedLocation:h,distance:c,ignoreLocation:o});if(d=Math.min(S,d),g=y+i,m){let T=0;for(;T<i;)M[y+T]=1,T+=1}}g=-1;let L=[],E=1,F=i+a,H=1<<i-1;for(let S=0;S<i;S+=1){let T=0,k=F;for(;T<k;)j(e,{errors:S,currentLocation:h+k,expectedLocation:h,distance:c,ignoreLocation:o})<=d?T=k:F=k,k=Math.floor((F-T)/2+T);F=k;let re=Math.max(1,h-k+1),U=u?a:Math.min(h+k,a)+i,$=Array(U+2);$[U+1]=(1<<S)-1;for(let _=U;_>=re;_-=1){let N=_-1,ne=r[t.charAt(N)];if(m&&(M[N]=+!!ne),$[_]=($[_+1]<<1|1)&ne,S&&($[_]|=(L[_+1]|L[_])<<1|1|L[_+1]),$[_]&H&&(E=j(e,{errors:S,currentLocation:N,expectedLocation:h,distance:c,ignoreLocation:o}),E<=d)){if(d=E,g=N,g<=h)break;re=Math.max(1,2*h-g)}}if(j(e,{errors:S+1,currentLocation:h,expectedLocation:h,distance:c,ignoreLocation:o})>d)break;L=$}let D={isMatch:g>=0,score:Math.max(.001,E)};if(m){let S=ut(M,s);S.length?f&&(D.indices=S):D.isMatch=!1}return D}function ft(t){let e={};for(let r=0,n=t.length;r<n;r+=1){let c=t.charAt(r);e[c]=(e[c]||0)|1<<n-r-1}return e}var Y=class{constructor(e,{location:r=p.location,threshold:n=p.threshold,distance:c=p.distance,includeMatches:l=p.includeMatches,findAllMatches:u=p.findAllMatches,minMatchCharLength:s=p.minMatchCharLength,isCaseSensitive:f=p.isCaseSensitive,ignoreLocation:o=p.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:c,includeMatches:l,findAllMatches:u,minMatchCharLength:s,isCaseSensitive:f,ignoreLocation:o},this.pattern=f?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let i=(h,d)=>{this.chunks.push({pattern:h,alphabet:ft(h),startIndex:d})},a=this.pattern.length;if(a>R){let h=0,d=a%R,g=a-d;for(;h<g;)i(this.pattern.substr(h,R),h),h+=R;if(d){let m=a-R;i(this.pattern.substr(m),m)}}else i(this.pattern,0)}searchIn(e){let{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return n&&(g.indices=[[0,e.length-1]]),g}let{location:c,distance:l,threshold:u,findAllMatches:s,minMatchCharLength:f,ignoreLocation:o}=this.options,i=[],a=0,h=!1;this.chunks.forEach(({pattern:g,alphabet:m,startIndex:M})=>{let{isMatch:y,score:L,indices:E}=dt(e,g,m,{location:c+M,distance:l,threshold:u,findAllMatches:s,minMatchCharLength:f,includeMatches:n,ignoreLocation:o});y&&(h=!0),a+=L,y&&E&&(i=[...i,...E])});let d={isMatch:h,score:h?a/this.chunks.length:1};return h&&n&&(d.indices=i),d}},x=class{constructor(e){this.pattern=e}static isMultiMatch(e){return ve(e,this.multiRegex)}static isSingleMatch(e){return ve(e,this.singleRegex)}search(){}};function ve(t,e){let r=t.match(e);return r?r[1]:null}var Ee=class extends x{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},Ae=class extends x{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},Ie=class extends x{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}},xe=class extends x{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},Le=class extends x{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Te=class extends x{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},Q=class extends x{constructor(e,{location:r=p.location,threshold:n=p.threshold,distance:c=p.distance,includeMatches:l=p.includeMatches,findAllMatches:u=p.findAllMatches,minMatchCharLength:s=p.minMatchCharLength,isCaseSensitive:f=p.isCaseSensitive,ignoreLocation:o=p.ignoreLocation}={}){super(e);this._bitapSearch=new Y(e,{location:r,threshold:n,distance:c,includeMatches:l,findAllMatches:u,minMatchCharLength:s,isCaseSensitive:f,ignoreLocation:o})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},q=class extends x{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n,c=[],l=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+l,c.push([n,r-1]);let u=!!c.length;return{isMatch:u,score:u?0:1,indices:c}}},J=[Ee,q,Ie,xe,Te,Le,Ae,Q],ke=J.length,pt=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,gt="|";function mt(t,e={}){return t.split(gt).map(r=>{let n=r.trim().split(pt).filter(l=>l&&!!l.trim()),c=[];for(let l=0,u=n.length;l<u;l+=1){let s=n[l],f=!1,o=-1;for(;!f&&++o<ke;){let i=J[o],a=i.isMultiMatch(s);a&&(c.push(new i(a,e)),f=!0)}if(!f)for(o=-1;++o<ke;){let i=J[o],a=i.isSingleMatch(s);if(a){c.push(new i(a,e));break}}}return c})}var yt=new Set([Q.type,q.type]),Re=class{constructor(e,{isCaseSensitive:r=p.isCaseSensitive,includeMatches:n=p.includeMatches,minMatchCharLength:c=p.minMatchCharLength,ignoreLocation:l=p.ignoreLocation,findAllMatches:u=p.findAllMatches,location:s=p.location,threshold:f=p.threshold,distance:o=p.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:c,findAllMatches:u,ignoreLocation:l,location:s,threshold:f,distance:o},this.pattern=r?e:e.toLowerCase(),this.query=mt(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){let r=this.query;if(!r)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:c}=this.options;e=c?e:e.toLowerCase();let l=0,u=[],s=0;for(let f=0,o=r.length;f<o;f+=1){let i=r[f];u.length=0,l=0;for(let a=0,h=i.length;a<h;a+=1){let d=i[a],{isMatch:g,indices:m,score:M}=d.search(e);if(g){if(l+=1,s+=M,n){let y=d.constructor.type;yt.has(y)?u=[...u,...m]:u.push(m)}}else{s=0,l=0,u.length=0;break}}if(l){let a={isMatch:!0,score:s/l};return n&&(a.indices=u),a}}return{isMatch:!1,score:1}}},X=[];function Mt(...t){X.push(...t)}function Z(t,e){for(let r=0,n=X.length;r<n;r+=1){let c=X[r];if(c.condition(t,e))return new c(t,e)}return new Y(t,e)}var b={AND:"$and",OR:"$or"},ee={PATH:"$path",PATTERN:"$val"},te=t=>!!(t[b.AND]||t[b.OR]),wt=t=>!!t[ee.PATH],St=t=>!A(t)&&me(t)&&!te(t),Ce=t=>({[b.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Fe(t,e,{auto:r=!0}={}){let n=c=>{let l=Object.keys(c),u=wt(c);if(!u&&l.length>1&&!te(c))return n(Ce(c));if(St(c)){let f=u?c[ee.PATH]:l[0],o=u?c[ee.PATTERN]:c[f];if(!I(o))throw new Error(Ze(f));let i={keyId:W(f),pattern:o};return r&&(i.searcher=Z(o,e)),i}let s={children:[],operator:l[0]};return l.forEach(f=>{let o=c[f];A(o)&&o.forEach(i=>{s.children.push(n(i))})}),s};return te(t)||(t=Ce(t)),n(t)}function _t(t,{ignoreFieldNorm:e=p.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:c,norm:l,score:u})=>{let s=c?c.weight:null;n*=Math.pow(u===0&&s?Number.EPSILON:u,(s||1)*(e?1:l))}),r.score=n})}function vt(t,e){let r=t.matches;e.matches=[],!!w(r)&&r.forEach(n=>{if(!w(n.indices)||!n.indices.length)return;let{indices:c,value:l}=n,u={indices:c,value:l};n.key&&(u.key=n.key.src),n.idx>-1&&(u.refIndex=n.idx),e.matches.push(u)})}function Et(t,e){e.score=t.score}function At(t,e,{includeMatches:r=p.includeMatches,includeScore:n=p.includeScore}={}){let c=[];return r&&c.push(vt),n&&c.push(Et),t.map(l=>{let{idx:u}=l,s={item:e[u],refIndex:u};return c.length&&c.forEach(f=>{f(l,s)}),s})}var C=class{constructor(e,r={},n){this.options={...p,...r},this.options.useExtendedSearch,this._keyStore=new Me(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof P))throw new Error(Xe);this._myIndex=r||_e(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){!w(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let r=[];for(let n=0,c=this._docs.length;n<c;n+=1){let l=this._docs[n];e(l,n)&&(this.removeAt(n),n-=1,c-=1,r.push(l))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){let{includeMatches:n,includeScore:c,shouldSort:l,sortFn:u,ignoreFieldNorm:s}=this.options,f=I(e)?I(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return _t(f,{ignoreFieldNorm:s}),l&&f.sort(u),ge(r)&&r>-1&&(f=f.slice(0,r)),At(f,this._docs,{includeMatches:n,includeScore:c})}_searchStringList(e){let r=Z(e,this.options),{records:n}=this._myIndex,c=[];return n.forEach(({v:l,i:u,n:s})=>{if(!w(l))return;let{isMatch:f,score:o,indices:i}=r.searchIn(l);f&&c.push({item:l,idx:u,matches:[{score:o,value:l,norm:s,indices:i}]})}),c}_searchLogical(e){let r=Fe(e,this.options),n=(s,f,o)=>{if(!s.children){let{keyId:i,searcher:a}=s,h=this._findMatches({key:this._keyStore.get(i),value:this._myIndex.getValueForItemAtKeyId(f,i),searcher:a});return h&&h.length?[{idx:o,item:f,matches:h}]:[]}switch(s.operator){case b.AND:{let i=[];for(let a=0,h=s.children.length;a<h;a+=1){let d=s.children[a],g=n(d,f,o);if(g.length)i.push(...g);else return[]}return i}case b.OR:{let i=[];for(let a=0,h=s.children.length;a<h;a+=1){let d=s.children[a],g=n(d,f,o);if(g.length){i.push(...g);break}}return i}}},c=this._myIndex.records,l={},u=[];return c.forEach(({$:s,i:f})=>{if(w(s)){let o=n(r,s,f);o.length&&(l[f]||(l[f]={idx:f,item:s,matches:[]},u.push(l[f])),o.forEach(({matches:i})=>{l[f].matches.push(...i)}))}}),u}_searchObjectList(e){let r=Z(e,this.options),{keys:n,records:c}=this._myIndex,l=[];return c.forEach(({$:u,i:s})=>{if(!w(u))return;let f=[];n.forEach((o,i)=>{f.push(...this._findMatches({key:o,value:u[i],searcher:r}))}),f.length&&l.push({idx:s,item:u,matches:f})}),l}_findMatches({key:e,value:r,searcher:n}){if(!w(r))return[];let c=[];if(A(r))r.forEach(({v:l,i:u,n:s})=>{if(!w(l))return;let{isMatch:f,score:o,indices:i}=n.searchIn(l);f&&c.push({score:o,key:e,value:l,idx:u,norm:s,indices:i})});else{let{v:l,n:u}=r,{isMatch:s,score:f,indices:o}=n.searchIn(l);s&&c.push({score:f,key:e,value:l,norm:u,indices:o})}return c}};C.version="6.4.6";C.createIndex=_e;C.parseIndex=lt;C.config=p;C.parseQuery=Fe;Mt(Re);var $e=C;var be=null,It=5,Oe={async init(){try{let t=await window.fetch("https://hugoinaction.github.io/GitHubPagesStore/index.json");if(!t.ok){this.removeSearch();return}let e=await t.json();be=new $e(e,{keys:[{name:"title",weight:20},{name:"tag",weight:5},{name:"content"}]}),document.addEventListener("input",this.showResults)}catch(t){this.removeSearch()}},showResults(t){let e=document.querySelector("#search input");if(t.target!==e)return;let r=document.querySelector("#search div");if(e.value.length>0){let n=be.search(e.value);r.innerHTML=n.slice(0,It).map(c=>`<a href="${c.item.url}">
          <img src="${c.item.cover||""}" width="40" height="40">
          <h3>${c.item.title}</h3>
          <span>${c.item.content.substr(0,40)}</span>
        </a>`).join("")}else r.innerHTML=""},removeSearch(){document.querySelector("#search")?.remove()}};var v=[],O={},Ne,Be={async init(){let t=document.createElement("script");t.setAttribute("src","https://js.stripe.com/v3/"),t.onload=()=>{Ne=Stripe("pk_test_51HzWldGtPsFUGVMkhc6CpV68fwK7E4dzvI6m9Q2RsTA92TBB7AD0NDxnGdgG1jbP65eWz89KTMs8x2tE8mwuS7uN003Q3yiak0")},t.defer=!0,document.body.appendChild(t),document.addEventListener("click",this.handleClick.bind(this)),window.addEventListener("storage",this.updateCart.bind(this)),await this.productInfo(),this.updateCart();let e=new URL(window.location.href);e.searchParams.get("purchase")==="success"&&(e.searchParams.get("retain")||(v.length=0,this.save()),document.body.insertAdjacentHTML("beforeend",`
      <div class="alert success">
        <div class="head">Order Confirmed.</div> 
        Your product will be e-mailed soon.
        <a class="close" href="#">Close</a>
      </div>`),e.searchParams.delete("purchase"),e.searchParams.delete("retain"),window.history.replaceState(null,"",e),document.querySelector(".alert.success .close").addEventListener("click",r=>{document.body.removeChild(document.querySelector(".alert.success")),r.preventDefault()}),setTimeout(()=>{document.body.removeChild(document.querySelector(".alert.success"))},5e3))},handleClick(t){if(t.target.classList.contains("addToCart"))t.preventDefault(),this.addToCart(t.target.form);else if(t.target.classList.contains("buyNow")){t.preventDefault();let e=new FormData(t.target.form);this.onCheckout([{name:e.get("name"),color:e.get("color")}],!0)}else t.target.matches("#cart .delete")?this.onDelete(t):t.target.id==="checkout"&&this.onCheckout()},async onCheckout(t=v,e=!1){try{let r=new URL("https://hugoinaction.herokuapp.com/checkout");t.forEach(c=>r.searchParams.append("products",`${c.name}_${c.color}`)),r.searchParams.append("success",encodeURIComponent(window.location.pathname+`?purchase=success&retain=${e}`)),r.searchParams.append("cancel",encodeURIComponent(window.location.pathname+"?purchase=cancel"));let n=await window.fetch(r.href);if(n.ok){let c=await n.json();Ne.redirectToCheckout({sessionId:c.sessionId})}}catch(r){console.log("Error",r)}},addToCart(t){let e=new FormData(t),r=e.get("name"),n=e.get("color");v.find(c=>c.name===r&&c.color===n)||v.push({name:r,color:n}),this.render(),this.save()},updateCart(){let t=JSON.parse(window.localStorage.getItem("cart")||"[]");v=Array.isArray(t)?t:[],this.render()},async productInfo(){let t=await window.fetch("https://hugoinaction.github.io/GitHubPagesStore/store/index.json");t.ok&&(O=await t.json()),this.render()},save(){window.localStorage.setItem("cart",JSON.stringify(v))},onDelete:function(t){v.splice(v.findIndex(e=>e.name==t.target.dataset.name&&e.color===t.target.dataset.color),1),this.render(),this.save()},render(){let t=document.querySelector("#cart .badge"),e=document.querySelector("#cart > div ");if(t&&(t.innerText=v.length||""),!O||!Object.keys(O).length)return;let r=v.map(n=>({...n,price:parseFloat(O[n.name].Price),cover:O[n.name].Cover}));e&&(e.innerHTML=r.map(n=>`<div class="item">
          <img src="${n.cover}" lazy="true" width="40px">
          <div class="details">
            <h3>${n.name}</h3>
            <div class="color ${n.color}"></div>
            <a class="delete" data-name="${n.name}" data-color="${n.color}">Delete</a>
          </div>
          <div class="price">$${n.price.toFixed(2)}</div>
        </div>`).join(`
`)+`<div class="empty">
          Please add some items to the cart.
        </div>
        <button id="checkout">Checkout</button>`)}};function xt(){fe.init(),Oe.init(),Be.init()}xt();})();
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
